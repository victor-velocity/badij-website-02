!function (d) { "use strict"; qodefCore.shortcodes.badij_core_login_register = {}, d(document).ready(function () { l.init() }); var l = { init: function () { this.holder = d("#qodef-membership-login-modal"), this.holder.length && (l.triggerShowModal(this.holder), l.initTabs(this.holder), l.triggerResetPasswordLink(this.holder), l.triggerRegisterLink(this.holder), l.triggerLoginLink(this.holder), l.triggerResetLoginLink(this.holder), l.triggerFormSubmit(this.holder), l.triggerFormSocialSubmit(this.holder), l.triggerShortcode(this.holder)) }, triggerShowModal: function (i) { i.children(".qodef-membership-login-modal-overlay").on("click", function () { l.hideModal(i) }), i.find(".qodef-membership-login-modal-close-icon").on("click", function () { l.hideModal(i) }), d(window).on("keyup", function (e) { 27 === e.keyCode && l.hideModal(i) }), d(document.body).on("badij_membership_trigger_login_modal", function () { l.showModal(i) }) }, showModal: function (e) { e.hasClass("qodef--opened") || e.addClass("qodef--opened") }, hideModal: function (e) { e.hasClass("qodef--opened") && e.removeClass("qodef--opened") }, initTabs: function (e) { e.children(".qodef-membership-login-modal-content").tabs() }, triggerResetPasswordLink: function (i) { i.find("#qodef-membership-login-modal-part .qodef-m-links-reset-password").on("click", function (e) { e.preventDefault(); e = i.find(".qodef-membership-login-modal-navigation .qodef-m-navigation-item.qodef--reset-password"); e.length && e.find(".qodef-e-link").trigger("click") }) }, triggerRegisterLink: function (i) { i.find("#qodef-membership-login-modal-part .qodef-m-links-register").on("click", function (e) { e.preventDefault(); e = i.find(".qodef-membership-login-modal-navigation .qodef-m-navigation-item.qodef--register"); e.length && e.find(".qodef-e-link").trigger("click") }) }, triggerLoginLink: function (i) { i.find("#qodef-membership-register-modal-part .qodef-m-links-login").on("click", function (e) { e.preventDefault(); e = i.find(".qodef-membership-login-modal-navigation .qodef-m-navigation-item.qodef--login"); e.length && e.find(".qodef-e-link").trigger("click") }) }, triggerResetLoginLink: function (i) { i.find("#qodef-membership-reset-password-modal-part .qodef-m-links-login").on("click", function (e) { e.preventDefault(); e = i.find(".qodef-membership-login-modal-navigation .qodef-m-navigation-item.qodef--login"); e.length && e.find(".qodef-e-link").trigger("click") }) }, triggerFormSubmit: function (e) { e = e.find("form"); e.length && e.each(function () { var i = d(this); i.on("submit", function (e) { e.preventDefault(), i.hasClass("qodef--loading") || l.triggerRequest(i) }) }) }, triggerFormSocialSubmit: function (e) { var i = e.find('form[id*="qodef-membership-login"]'); i.length && i.find(".qodef-m-social-login").find(".qodef-m-social-login-btn").on("click", function (e) { e.preventDefault(), d(document).trigger("badij_membership_social_login_is_triggered", [l, i, d(this).data("social")]) }) }, triggerShortcode: function (e) { var i, o, e = e.parent(".qodef-shortcode.qodef-login-register"); e.hasClass("qodef-show-form--register") && (e.find(".qodef-membership-login-modal-navigation .qodef-m-navigation-item.qodef--register .qodef-e-link").trigger("click"), i = e.find("#qodef-membership-register-modal-part .qodef-m-user-password"), o = e.find("#qodef-membership-register-modal-part .qodef-m-user-confirm-password"), i.on("input", function () { o.val(d(this).val()) })) }, triggerRequest: function (i, e, o) { i.addClass("qodef--loading"); var n = i.find(".qodef-m-response"), t = i.find(".qodef-m-request-type").val(), r = (n.removeClass("qodef--success qodef--error qodef--undefined").empty(), { options: { request_type: t, redirect: i.find(".qodef-m-redirect").val(), private_key: "false" }, nonce: i.find("#badij-membership-ajax-" + t + "-nonce").val() }), s = "POST", a = qodefGlobal.vars.loginModalRestRoute; switch (t) { case "login": s = "GET", a = qodefGlobal.vars.loginModalGetRestRoute, r.options.user_login = i.find(".qodef-m-user-name").val(), r.options.user_password = i.find(".qodef-m-user-password").val(), r.options.remember = i.find(".qodef-m-links-remember:checked").length, null != e && (r.options.social_login = e, null != o && (r.options.social_response = o)); break; case "register": r.options.user_login = i.find(".qodef-m-user-name").val(), r.options.user_email = i.find(".qodef-m-user-email").val(), r.options.user_password = i.find(".qodef-m-user-password").val(), r.options.user_confirm_password = i.find(".qodef-m-user-confirm-password").val(); break; case "reset-password": r.options.user_login = i.find(".qodef-m-user-login").val() }return d.ajax({ type: s, url: qodefGlobal.vars.restUrl + a, data: r, success: function (e) { n.addClass("qodef--" + e.status).html(e.message), "success" === e.status && ("register" !== t || r.options.hasOwnProperty("social_login") ? l.triggerRedirection(e.redirect) : l.triggerForceLogin(i, r, e.redirect)) }, complete: function () { i.removeClass("qodef--loading") } }), !1 }, triggerRedirection: function (e) { "" !== e && e !== window.location && (window.location = e) }, triggerForceLogin: function (e, i, o) { i.options.request_type = "login", i.nonce = e.parent().find("#badij-membership-ajax-login-nonce").val(), d.ajax({ type: "GET", url: qodefGlobal.vars.restUrl + qodefGlobal.vars.loginModalGetRestRoute, data: i, dataType: "json", success: function (e) { "success" === e.status && l.triggerRedirection(o) } }) } }; qodefCore.shortcodes.badij_core_login_register.qodefLoginModal = l }(jQuery), function (o) { "use strict"; o(document).ready(function () { e.init() }); var e = { init: function () { this.holder = o(".qodef-login-opener-widget"), this.holder.length && this.holder.each(function () { e.triggerClick(o(this)) }) }, triggerClick: function (e) { var e = e.find(".qodef-login-opener"), i = o("body").find(".qodef-login-register"); e.on("click", function (e) { i.length || e.preventDefault(), o(document.body).trigger("badij_membership_trigger_login_modal") }) } } }(jQuery), function (e, i, o) { var n = e.getElementsByTagName(i)[0]; e.getElementById(o) || ((e = e.createElement(i)).id = o, e.src = "https://connect.facebook.net/en_US/sdk.js", n.parentNode.insertBefore(e, n)) }(document, "script", "facebook-jssdk"), function (e) { "use strict"; e(document).ready(function () { t.init() }), e(document).on("badij_membership_social_login_is_triggered", function (e, i, o, n) { t.fbIsAppIdSet() && "facebook" === n && t.fbLogin(i, o, n) }); var t = { init: function () { t.fbIsAppIdSet() && t.fbAsyncInit(badijMembershipGlobal.facebookAppId) }, fbIsAppIdSet: function () { return void 0 !== badijMembershipGlobal.facebookAppId && "" !== badijMembershipGlobal.facebookAppId }, fbAsyncInit: function (e) { "" !== e && (window.fbAsyncInit = function () { FB.init({ appId: e, autoLogAppEvents: !0, cookie: !0, xfbml: !0, version: "v5.0" }), window.FB = FB }) }, fbLogin: function (i, o, n) { window.FB.login(function (e) { t.fbCheckStatus(e, i, o, n) }, { scope: "email, public_profile" }) }, fbCheckStatus: function (e, i, o, n) { "connected" === e.status ? t.fbGetUserData(i, o, n) : "not_authorized" === e.status ? console.log("Please log into this app") : console.log("Please log into Facebook") }, fbGetUserData: function (i, o, n) { FB.api("/me", "GET", { fields: "id, name, email, link, picture" }, function (e) { e.image = e.picture.data.url, o.hasClass("qodef--loading") || i.triggerRequest(o, n, e) }) } } }(jQuery), function (e) { "use strict"; e(document).ready(function () { t.init() }), e(document).on("badij_membership_social_login_is_triggered", function (e, i, o, n) { t.isAppIdSet() && "google" === n && t.login(i, o, n) }); var t = { init: function () { t.isAppIdSet() && t.asyncInit(badijMembershipGlobal.googleAppId) }, isAppIdSet: function () { return void 0 !== badijMembershipGlobal.googleAppId && "" !== badijMembershipGlobal.googleAppId }, asyncInit: function (e) { "" !== e && gapi.load("auth2", function () { window.auth2 = gapi.auth2.init({ client_id: e }) }) }, login: function (e, i, o) { window.auth2.signIn().then(t.signIn(e, i, o), function (e) { console.log(e) }) }, signIn: function (i, o, n) { window.auth2.isSignedIn.get() ? t.getUserData(i, o, n) : window.gapi.auth2.getAuthInstance().isSignedIn.listen(function (e) { e && t.getUserData(i, o, n) }) }, getUserData: function (e, i, o) { var n = window.auth2.currentUser.get().getBasicProfile(), n = { id: n.getId(), name: n.getName(), email: n.getEmail(), image: n.getImageUrl() }; i.hasClass("qodef--loading") || e.triggerRequest(i, o, n) } } }(jQuery), function () { "use strict"; jQuery(document).on("badij_membership_social_login_is_triggered", function (e, i, o, n) { "twitter" === n && t.triggerRequest(i, o, n) }); var t = { triggerRequest: function (e, i, o) { i.hasClass("qodef--loading") || e.triggerRequest(i, o) } } }();